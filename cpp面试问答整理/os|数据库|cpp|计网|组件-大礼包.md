# CPP
## STL
1.迭代器失效问题
- 树形迭代器(map/set/multimap/multiset)的插入和修改都不影响其它迭代器，删除后被删除元素的迭代器失效
- 链表形迭代器(list)同上
- 数组形迭代器(vector/deque)，被操作元素及其后边的元素迭代器都失效(如果capcity发生改变，则全部失效，这里特指vector的resize())

2.vector
- 分配是在堆还是在栈？在堆。因为要求下标连续，栈内没法保证连续；其次vector需要扩展，栈内也没法扩展。
- resize和reserve有什么区别？resize用来改变实际存储的元素数量(size)，如果比原来小，会删除末尾元素，如果比原来大，会添加默认值。
而reserve改变的则是预分配内存大小(capcity)，如果比原来小，不会做任何事情，如果比原来大，会重新分配内存。
- 如何改变size大小？
- 如何改变capcity大小？

3.map
- map是线程安全的吗？
- map和unordered_map的效率比较
- unordered_map的底层
- map的底层(即红黑树原理)？
- 讲一下开链法
  
4.一致性哈希算法和普通哈希算法有什么区别？

5.数组和链表的区别

6.栈和队列的区别



## 智能指针
0.智能指针有哪几种？

1.shareptr是不是线程安全的？
否，shareptr只通过原子操作保证计数是线程安全的，但多线程同时访问shareptr所管理的对象时依然会有并发问题，需要加锁。

2.把uniqueptr移动到shareptr会发生什么？
uniqueptr的为空，不再拥有资源，shareptr创建一个新的控制块来管理资源。底层伪代码是：
```cpp
template<typename T>
std::shared_ptr<T>::shared_ptr(std::unique_ptr<T>&& uniquePtr) {
    if (uniquePtr) {
        // 接管资源
        this->ptr = uniquePtr.release();
        // 创建控制块
        this->controlBlock = new ControlBlock();
        this->controlBlock->refCount = 1;
    } else {
        this->ptr = nullptr;
        this->controlBlock = nullptr;
    }
}
```

3.weak_ptr是为了解决？

4.share_ptr的底层实现？回收原理？

## 语法
1.struct和class区别？底层是如何实现的？

2.虚函数的实现原理

3.构造/析构函数允许是虚函数吗？

4.构造和析构函数里throw会有什么问题？

5.如果有一个类在析构的时候可能throw，怎么设计能保证正确析构并释放内存？

6.C++11/14新特性，你常用的有哪些？

7.讲一下左值和右值/移动语义/万能引用和完美转发？

8.讲一下纯虚函数和抽象类，虚函数和纯虚函数的的区别？

9.讲讲拷贝构造函数和operator=()

10.memcpy和memmove区别

11.内存屏障了解吗？

12.值传参和引用传参的区别？效率有区别吗？

13.void* 指针能否做算数运算，为什么？有什么作用？

14.const可以修饰全局函数吗？const全局变量在.data段还是.bss段？const局部变量存在哪？有没有办法修改const修饰的变量？const T &可以接受右值吗？

15.常成员函数的作用？

16.空类大小，继承空基类的子类大小，继承空虚基类的子类大小？

17.new和malloc区别？C++的内存分布模型？

18.讲一下assert和static_assert

19.不借助库函数如何判断大小端？什么时候需要注意大小端？

20.多态实现和原理？

21.空类会自动生成什么函数？

22.介绍一下移动构造？

23.栈区和堆区区别？在栈上新建对象和在堆上新建对象区别？

24.define/const/constexpr区别和应用场景

25.lambda的应用

26.virtual和override的区别和应用

27.sizeof 和 strlen 的区别

28.*int const a和const *int a有什么区别

29.scanf和cin有什么区别，为什么scanf比较快

30.几种类型转换之间的区别

31.内联函数知道吗？有什么好处？


# OS
1.消息队列有了解过吗？如何保证信息不丢失？如何保证一致性？

2.fork()的具体过程？

3.fork()都会返回吗？

4.linux命令行输入命令后的执行过程？

5.CAS操作了解吗？

6.int和uint和浮点数的二进制表示，每一位的含义？

7.进程和线程的区别，相关系统调用

8.锁有哪些种类？互斥锁和自旋锁的区别与具体应用？

9.用户态内存分为哪些区域？

10.程序运行经历的阶段？

11.如何保证一个类是线程安全的？

12.i++操作是线程安全的吗？

13.生产消费者模型中锁是如何实现的？

14.进程间通信方式？

15.进程间共享变量怎么做？

16.为什么要用虚拟内存？为什么要分段和分页？

17.什么是内核态，什么是用户态

18.异常和中断的区别？

# 数据库
1.什么时候该建立索引？什么时候不该建立索引？如何建立索引？

2.查询索引一定更快吗？分析下列情况怎么使用索引会更快？

3.数据库内核是怎么决定是否使用索引查询以及该用哪个索引查询？如何sampling，怎么计算查询成本和
生成执行计划？

4.如何让索引尽可能加速查询操作？

5.回表是什么？如何减少回表操作？

6.如果数据库的io很大，有哪些可能性，该如何排查并定位原因，该如何优化？

7.数据库还有哪些性能指标？

8.为什么主键要用自增id？

9.覆盖索引了解吗，具体怎么用？

10.为什么用B+树不用B树？为什么B+树胖且矮？如果把内容存在内存上，用B树会不会快一点？

11.B+树和B树的时间复杂度有什么区别，有的话差多少？

12.(a1,a2,a3)查找(a2,a3)会找到a1吗(最左前缀原则)？

13.怎么保证数据库和redis一致性？

14.讲一下一条SQL语句查询的全过程

15.讲一下隔离级别？

16.如何解决脏读/不可重读/幻读？能不加锁吗？

17.知道MVCC吗？

18.redo log和undo log有什么区别？


# 计网
## TCP
1.TCP三次握手过程/四次挥手过程？为什么是三次，为什么是四次？多一次少一次不行吗？

2.syn序列号是怎么确定并发送的？

3.为什么ack回应的序列号是x+1？

4.简述DDos攻击，该如何防治？

5.RST有什么具体作用？

6.MTU是什么？

7.TIME_WAIT有什么用？

8.比较TCP和UDP

9.TCP为什么会粘包(Nagle)算法和解决方法？

10.怎么设计一个可靠且报文有序的UDP协议？

11.讲一下TCP的滑动窗口机制，滑动窗口大小如何确定？

12.全连接队列与半连接队列了解吗？

13.如果出现很多次close_wait怎么解决？close_wait和time_wait分别在哪个阶段？

14.TCP建立连接个数可以超过端口号个数吗？如何确定唯一的TCP连接？

15.流量控制与拥塞控制区别？

16.输入一个URL，计算机会发生什么？

## HTTP

1.http请求由哪部分构成？

2.常见的请求头有什么？

3.get和post的区别？

4.HTTP用TCP还是UDP？

5.常见状态码

6.是长连接还是短连接，如何用UDP实现

7.使用HTTP从服务器获取数据，数据有长有段，如何接受？

8.HTTP为什么要用非对称加密和对称加密？为什么不只用一个？

9.知道http有几个版本吗，2和3有什么区别

## 网络安全
1.对称加密与非对称加密过程？

2.HTTPS怎么保证安全通信？


## 其它协议
1.知道ICMP吗？

2.7层，5层，4层协议？每层的常见协议？

3.cookie和session的区别？

## 服务器底层
1.epoll和select和poll有什么区别

2.什么时候用水平触发，什么时候用边缘触发？

3.一个TCP句柄什么情况下会有可读事件？

4.TCP的connect发送了什么报文?

5.UDP的句柄能执行connect吗？

# 中间件
1.zookeeper了解吗？

2.MySQL/Redis/Kafka等在高性能，高可用，高并发方面有什么设计？
Redis有哨兵集群和切片集群。

3.Redis的缓存三姐妹(缓存穿透/缓存击穿/缓存雪崩)？手动更新完数据库，导致缓存失效了，大量的数据全打在数据库上怎么处理？

4.etcd的原理？

5.redis和mysql区别(?)

6.MySQL底层使用的数据结构？


# 设计模式
1.单例模式怎么实现？

2.怎么实现一个线程一个单例？

# Linux
1.查看进程系列命令:
- ps-aux第二列是什么
- ps-aux和ps -elf的区别

# 脑筋急转弯
1.10个红球和10个白球放俩盒子里，怎么分配使得从这俩盒子中摸一个球是红球的概率最高？

2.25匹马，5个跑道，最少需要多少次比赛选出最快top3？

3. 有1000瓶水，只有1瓶有毒，有无限老鼠，老鼠可以喝任意瓶。毒药会在24小时后发作，请在一天内
用最少老鼠找出哪瓶有毒？


# 场景题
1.1s内有大量用户访问，怎么缓解服务器压力？

2.内存泄漏怎么解决？

3.如果有一个错误的提交怎么把它退回到正确的，包括本地和远端都要回退？

4.gdb在程序运行时如何调试？

5.设计一个应用层使用TCP应该注意哪些？


# 高频lc
- 链表反转
- 链表归并
- LRU缓存
- k个链表归并
- k个一组反转链表且空间O(1)时间O(n)
- 重排链表
- 括号匹配
- 寻找avl第k大的数
- 三数之和
- 未出现的最小正整数且空间O(1)时间O(n)
- 判断字符串s是否为字符串t首尾连接构成的环的一部分
- 找出数组中第k大的数
- 主站1081
